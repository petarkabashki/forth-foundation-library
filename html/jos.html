<!DOCTYPE html>
<html>
<head>
<title>jos  --  JSON output stream </title>
<meta name='generator' content='fsdocgen'>
<link rel='stylesheet' href='style.css'>
</head>
<body>
<h2>Module description</h2>
<dl><dt>jos  --  JSON output stream </dt>
<dd>
The jos module implements an JSON [Javascript Object Notation] writer.     
JSON is a lightweight data interchange format. See                         
<a href='http://www.json.org'>json.org</a>. The jos module extends the     
<a href='tos.html'>tos</a> module with extra words, so the tos words can   
be used on a jos variable. The module checks the use of the writer words   
in relation to the syntax. If a word is used outside the syntax, an        
exp-invalid-state exception is thrown.                                     
</dd>
</dl>
<hr>
<h2>JSON output stream structure </h2>
<dl>
<dt id='jos%'>jos% (  -- n  )</dt>
<dd> Get the required space for a jos writer variable </dd>
</dl>
<h2>JSON output stream creation, initialisation and destruction </h2>
<dl>
<dt id='jos-init'>jos-init (  jos --  )</dt>
<dd> Initialise an empty output stream </dd>
</dl>
<dl>
<dt id='jos-(free)'>jos-(free) (  tos --  )</dt>
<dd> Free the stream data from the heap </dd>
</dl>
<dl>
<dt id='jos-create'>jos-create (  "&lt;spaces&gt;name" -- ; -- jos  )</dt>
<dd> Create a named JSON output stream in the dictionary </dd>
</dl>
<dl>
<dt id='jos-new'>jos-new (  -- jos  )</dt>
<dd> Create a new JSON output stream on the heap </dd>
</dl>
<dl>
<dt id='jos-free'>jos-free (  jos --  )</dt>
<dd> Free the JSON output stream from the heap </dd>
</dl>
<h2>json writer words </h2>
<dl>
<dt id='jos-write-start-object'>jos-write-start-object (  jos --  )</dt>
<dd> Write the start of an object </dd>
</dl>
<dl>
<dt id='jos-write-end-object'>jos-write-end-object (  jos --  )</dt>
<dd> Write the end of an object </dd>
</dl>
<dl>
<dt id='jos-write-start-array'>jos-write-start-array (  jos --  )</dt>
<dd> Write the start of an array </dd>
</dl>
<dl>
<dt id='jos-write-end-array'>jos-write-end-array (  jos --  )</dt>
<dd> Write the end of an array </dd>
</dl>
<dl>
<dt id='jos-write-name'>jos-write-name (  c-addr u jos --  )</dt>
<dd> Write a name </dd>
</dl>
<dl>
<dt id='jos-write-string'>jos-write-string (  c-addr u jos --  )</dt>
<dd> Write a string value </dd>
</dl>
<dl>
<dt id='jos-write-number'>jos-write-number (  n jos --  )</dt>
<dd> Write a number as value</dd>
</dl>
<dl>
<dt id='jos-write-double'>jos-write-double (  d jos --  )</dt>
<dd> Write a double as value </dd>
</dl>
<dl>
<dt id='jos-write-float'>jos-write-float (  r jos --  )</dt>
<dd> Write a float as value </dd>
</dl>
<dl>
<dt id='jos-write-boolean'>jos-write-boolean (  flag jos --  )</dt>
<dd> Write a boolean as value </dd>
</dl>
<dl>
<dt id='jos-write-nil'>jos-write-nil (  jos --  )</dt>
<dd> Write the nil pointer as value </dd>
</dl>
<dl>
<dt id='jos-dump'>jos-dump (  jos --  )</dt>
<dd> Dump the jos variable </dd>
</dl>
<h2>Examples</h2>
<pre>
\ ==============================================================================
\
\          jos_expl - the json output stream example in the ffl
\
\               Copyright (C) 2010  Dick van Oudheusden
\  
\ This library is free software; you can redistribute it and/or
\ modify it under the terms of the GNU General Public
\ License as published by the Free Software Foundation; either
\ version 2 of the License, or (at your option) any later version.
\
\ This library is distributed in the hope that it will be useful,
\ but WITHOUT ANY WARRANTY; without even the implied warranty of
\ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
\ General Public License for more details.
\
\ You should have received a copy of the GNU General Public
\ License along with this library; if not, write to the Free
\ Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
\
\ ==============================================================================
\ 
\  $Date: 2008-01-13 08:09:33 $ $Revision: 1.3 $
\
\ ==============================================================================

include ffl/jos.fs


\ Example : Write json output


\ Create the json output stream in the dictionary

jos-create jos1

jos1 jos-write-start-object           \ Write the start of a json object 

s" number" jos1 jos-write-name        \ Write a number with its value
5          jos1 jos-write-number

s" array"  jos1 jos-write-name        \ Write an array with three members
           jos1 jos-write-start-array
7          jos1 jos-write-number
true       jos1 jos-write-boolean
s" hello"  jos1 jos-write-string
           jos1 jos-write-end-array

jos1 jos-write-end-object             \ Write the end of the object

jos1 str-get type cr                  \ Type the json output
</pre>
<hr>
<p>Generated by fsdocgen 0.1.0</p>
</body>
</html>
